{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>

<div class="container mb-2">
    <div class="row">
        <div class="col">
            <h2 class="mb-4 mt-5">Tour Bookings Basket</h2>
            <p>Please review your bookings, edit, delete or add as necessary before proceeding to order</p>
        </div>
    </div>
    {% if basket_items %}

    <!-- List of All Booked Tours for the User -->
    <div class="table-responsive rounded">
        <table class="table product-table">
            
            <!--Table head-->
            <thead>
                <tr>
                    <th></th>
                    <th>Tour</th>
                    <th>Date</th>
                    <th>Dept</th>
                    <th>QTY</th>
                    <th>Price</th>
                    <th>Total</th>
                    <th></th>
                </tr>
            </thead>

            <!--Table body-->
            <tbody>
                {%  for item in basket_items  %}
                <tr>
                    <th scope="row">
                        <img src="{{  item.tour.image  }}" alt="" class="img-fluid rounded">
                    </th>
                    <td>
                        <h5><strong>{{ item.tour.tour_name }}</strong></h5>
                        <p class="text-muted"></p>
                    </td>
                    <td></td> <!--item.tour_date?-->
                    <td>Times: {%  if item.tour.has_departure_times  %}{{  item.departure_time  }}{%  else %}N/A{% endif %}</td>
                    <td>{{ item.quantity  }}</td>
                    <td>€ {{ item.tour.price  }}</td>
                    <td>€ {{ total|floatformat:2 }}</td>
                    <td>
                        <!--Delete Booking-->
                        <a class="btn btn-sm btn-danger" href=""
                            aria-label="Delete Booking"><i class="fa-solid fa-trash-can"></i>
                        </a>
                    </td>
                    <td>
                        <!--Update Booking-->
                        <a class="btn btn-sm btn-primary update" href=""
                            aria-label="Update Booking"><i class="fa-solid fa-pencil"></i>
                        </a>

                    </td>

                    {%  endfor  %}
                </tr>


                <!--Total Price row-->
                <tr>

                    <td colspan="2"></td>
                    <td colspan="3"><a class="btn btn-outline-secondary btn-sm" href="{% url 'tours-list' %}"
                            aria-label="Go to the Tours List Section"><i class="fa fa-angle-left left"></i> Browse More
                            Tours </a></td>
                    <td>
                        <h4><strong>Grand Total</strong></h4>
                    </td>
                    <td>
                        <h4><strong>€ {{ total|floatformat:2 }}</strong></h4>
                    </td>
                    
                    <td colspan="3"><a href="" class="btn btn-primary btn-sm">Checkout<i
                                class="fa fa-angle-right right"></i></a>
                    </td>
                </tr>

            </tbody>
        </table>

    </div>

    {%  else  %}
    <!--If User's basket is empty-->
    <div>
        <h5 class="mt-5 mb-4">No Bookings in Basket</h5>
    </div>
    <div><a class="btn btn-outline-secondary btn-sm" href="{% url 'tours-list' %}"
            aria-label="Go to the Tours List Section"><i class="fa fa-angle-left left"></i> Browse More Tours </a></div>

    {%  endif %}


    {% endblock %}